<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>ramda旧笔记 | 木水三三的博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ramda旧笔记</h1><a id="logo" href="/.">木水三三的博客</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ramda旧笔记</h1><div class="post-meta">Oct 30, 2018</div><div class="post-content"><hr>
<p>title: ramda旧日记<br>date: 2018-10-30 11:29:13</p>
<h2 id="tags-ramda"><a href="#tags-ramda" class="headerlink" title="tags: ramda"></a>tags: ramda</h2><h4 id="ramda日常使用"><a href="#ramda日常使用" class="headerlink" title="ramda日常使用"></a>ramda日常使用</h4><ul>
<li><a href="https://ramdajs.com/" target="_blank" rel="noopener">Ramda</a> 与 Underscore 和 Lodash 不同，后两者把处理的数据放到第一位，Ramda 的数据一律放在最后一个参数。</li>
<li>Ramda 还有一个特点：所有方法都支持柯里化。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">import R from &apos;ramda&apos;</span><br><span class="line"></span><br><span class="line">var square = n =&gt; n * n;</span><br><span class="line">var Log = R.map(square)</span><br><span class="line">var add = R.curry(function (x, y) &#123;</span><br><span class="line">    return x + y</span><br><span class="line">&#125;)</span><br><span class="line">//比较运算</span><br><span class="line">var gt = R.gt(2)(1) //判断第一个参数是否大于第二个</span><br><span class="line">var gte = R.gte(2)(2) // 判断第一个参数是否大于等于第二个</span><br><span class="line">var lt = R.lt(2)(1) // 判断第一个参数是否小于第二个</span><br><span class="line">var lte = R.lte(2)(2) // 判断第一个参数是否小于等于第二个</span><br><span class="line">var equals = R.equals([1, 2, 3])([1, 2, 3]) // true, 比较两个值是否相等（支持对象的比较）</span><br><span class="line">var eaBy = R.eqBy(Math.abs, 5)(-5) //比较两个值传入指定函数的运算结果是否相等。</span><br><span class="line"></span><br><span class="line">//数学运算</span><br><span class="line">var add = R.add(1)(10) //返回两个值的和。</span><br><span class="line">var subtract = R.subtract(10)(8) // 返回第一个参数减第二个参数的差。</span><br><span class="line">var multiply = R.multiply(2)(5) // 返回两个值的积</span><br><span class="line">var divide = R.divide(71)(100) // 返回第一个参数除以第二个参数的商。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//逻辑运算</span><br><span class="line">var gt10 = x =&gt; x &gt; 10;</span><br><span class="line">var even = x =&gt; x % 2 === 0;</span><br><span class="line">var either = R.either(gt10, even); //接受两个函数作为参数，只要有一个返回true，就返回true，否则返回false。相当于||运算</span><br><span class="line">either(101); //true</span><br><span class="line">either(8); //true</span><br><span class="line"></span><br><span class="line">var both = R.both(gt10, even); // 接受两个函数作为参数，只有它们都返回true，才返回true，否则返回false，相当于&amp;&amp;运算。</span><br><span class="line">both(15); //false</span><br><span class="line">both(30); //true</span><br><span class="line"></span><br><span class="line">var allPass = R.allPass([gt10, even]); //接受一个函数数组作为参数，只有它们都返回true，才返回true，否则返回false。</span><br><span class="line">allPass([15, 30]) // false</span><br><span class="line">allPass(30) // true</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//字符串</span><br><span class="line">var split = R.split(&apos;.&apos;) // 按照指定分隔符将字符串拆成一个数组。</span><br><span class="line">// console.log(split(&apos;a.b.c.xyz.d&apos;))</span><br><span class="line"></span><br><span class="line">var test = R.test(/^x/)(&apos;xyz&apos;); // 判断一个字符串是否匹配给定的正则表达式。</span><br><span class="line"></span><br><span class="line">var match = R.match(/([a-z]a)/g)(&apos;bananas&apos;); //返回一个字符串的匹配结果。</span><br><span class="line">// console.log(match); // [&apos;ba&apos;, &apos;na&apos;, &apos;na&apos;]</span><br><span class="line"></span><br><span class="line">var compose = R.compose(Math.abs, R.add(1), R.multiply(2)); //将多个函数合并成一个函数，从右到左执行。</span><br><span class="line">compose(20) //41</span><br><span class="line"></span><br><span class="line">var negative = x =&gt; -1 * x;</span><br><span class="line">var increaseOne = x =&gt; x + 1;</span><br><span class="line">var pipe = R.pipe(Math.pow, negative, increaseOne); // 将多个函数合并成一个函数，从左到右执行。</span><br><span class="line">pipe(3, 4) // -80 =&gt; -(3^4) + 1</span><br><span class="line"></span><br><span class="line">var sumOfArr = arr =&gt; &#123;</span><br><span class="line">    var sum = 0;</span><br><span class="line">    arr.forEach(i =&gt; sum += i);</span><br><span class="line">    return sum;</span><br><span class="line">&#125;;</span><br><span class="line">var lengthOfArr = arr =&gt; arr.length;</span><br><span class="line"></span><br><span class="line">var average = R.converge(R.divide, [sumOfArr, lengthOfArr]); // 接受两个参数，第一个参数是函数，第二个参数是函数数组。传入的值先使用第二个参数包含的函数分别处理以后，再用第一个参数处理前一步生成的结果。</span><br><span class="line">average([1, 2, 3, 4, 5, 6, 7])</span><br><span class="line">// 4</span><br><span class="line">// 相当于 28 除以 7</span><br><span class="line"></span><br><span class="line">var toUpperCase = s =&gt; s.toUpperCase();</span><br><span class="line">var toLowerCase = s =&gt; s.toLowerCase();</span><br><span class="line">var strangeConcat = R.converge(R.concat, [toUpperCase, toLowerCase])</span><br><span class="line">strangeConcat(&quot;Yodel&quot;)</span><br><span class="line">// &quot;YODELyodel&quot;</span><br><span class="line">// 相当于 R.concat(&apos;YODEL&apos;, &apos;yodel&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//柯里化</span><br><span class="line">var addFourNumbers = (a, b, c, d) =&gt; a + b + c + d;</span><br><span class="line">var curriedAddFourNumbers = R.curry(addFourNumbers); //curry 将多参数的函数，转换成单参数的形式。</span><br><span class="line">var f = curriedAddFourNumbers(1, 2);</span><br><span class="line">var g = f(3);</span><br><span class="line">g(4) // 10</span><br><span class="line"></span><br><span class="line">var multiply2 = (a, b) =&gt; a * b;</span><br><span class="line">var double = R.partial(multiply2, [2]); //partial 允许多参数的函数接受一个数组，指定最左边的部分参数。</span><br><span class="line">double(2) // 4</span><br><span class="line"></span><br><span class="line">var greet = (salutation, title, firstName, lastName) =&gt;</span><br><span class="line">    salutation + &apos;, &apos; + title + &apos; &apos; + firstName + &apos; &apos; + lastName + &apos;!&apos;;</span><br><span class="line"></span><br><span class="line">var sayHello = R.partialRight(greet, [&apos;Ms.&apos;, &apos;Jane&apos;, &apos;Jones&apos;]); //partialRight：与partial类似，但数组指定的参数为最右边的参数。</span><br><span class="line">sayHello(&apos;Hello&apos;);</span><br><span class="line"></span><br><span class="line">var decreaseOne = x =&gt; x - 1;</span><br><span class="line">var increaseOne = x =&gt; x + 1;</span><br><span class="line">R.useWith(Math.pow, [decreaseOne, increaseOne])(3, 4) // 32 useWith 接受一个函数fn和一个函数数组fnList作为参数，返回fn的柯里化版本。该新函数的参数，先分别经过对应的fnList成员处理，再传入fn执行。</span><br><span class="line">R.useWith(Math.pow, [decreaseOne, increaseOne])(3)(4) // 32</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var productOfArr = arr =&gt; &#123;</span><br><span class="line">    var product = 1;</span><br><span class="line">    arr.forEach(i =&gt; product *= i);</span><br><span class="line">    return product;</span><br><span class="line">&#125;;</span><br><span class="line">var count = 0;</span><br><span class="line">var factorial = R.memoize(n =&gt; &#123;</span><br><span class="line">    count += 1;</span><br><span class="line">    return productOfArr(R.range(1, n + 1));</span><br><span class="line">&#125;); // 返回一个函数，会缓存每一次的运行结果。</span><br><span class="line">factorial(5) // 120</span><br><span class="line">factorial(5) // 120</span><br><span class="line">factorial(6) // 120</span><br><span class="line">count //2</span><br><span class="line">var oldPP = &#123;</span><br><span class="line">    a: 1,</span><br><span class="line">    b: 2</span><br><span class="line">&#125;;</span><br><span class="line">var newpp = R.assoc(&apos;c&apos;, 3, oldPP);</span><br><span class="line">oldPP.a = 11;</span><br></pre></td></tr></table></figure>
<ul>
<li>参考资料<a href="http://www.ruanyifeng.com/blog/2017/03/ramda.html" target="_blank" rel="noopener">Ramda 函数库参考教程,阮一峰</a></li>
</ul>
</div><div class="tags"><a href="/tags/ramda/">ramda</a></div><div class="post-nav"><a class="next" href="/2018/10/30/随笔记/">随笔记</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/ramda/" style="font-size: 15px;">ramda</a> <a href="/tags/js运算/" style="font-size: 15px;">js运算</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/10/30/ramda旧笔记/">ramda旧笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/30/随笔记/">随笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/30/浮点数运算/">浮点数运算</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/21/js排序/">js排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/18/ES6/">ES6（一）</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">木水三三的博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>